# ğŸ“Š ë°ì´í„° ë¶„ì„

## âœï¸ DAY 06

## ğŸ“Š EDA ìƒê´€ê´€ê³„ ë¶„ì„

### **ğŸ’¡ í•µì‹¬ ê°œë… ìš”ì•½**

ìƒê´€ê´€ê³„ ë¶„ì„ì€ ë‘ ë³€ìˆ˜ ê°„ì˜ **ì„ í˜•/ë¹„ì„ í˜• ê´€ê³„**ë¥¼ ì •ëŸ‰ì ìœ¼ë¡œ ì¸¡ì •í•˜ì—¬ **ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì‚¬ì´íŠ¸**ë¥¼ ë„ì¶œí•˜ëŠ” ê³¼ì •

### **ğŸ“œ í•µì‹¬ ì›ì¹™**

- ìƒê´€ê´€ê³„ â‰  ì¸ê³¼ê´€ê³„
- ë°ì´í„° íƒ€ì…ì— ë”°ë¥¸ ì ì ˆí•œ ì¸¡ì • ë°©ë²• í•„ìš”
- í˜¼ë€ë³€ìˆ˜ í†µì œì˜ ì¤‘ìš”ì„±
- ë°˜ë“œì‹œ **ë¹„ì¦ˆë‹ˆìŠ¤ ì•¡ì…˜**ìœ¼ë¡œ ì—°ê²°

---

## ğŸ“ˆğŸ“‰ ê¸°ë³¸ ìƒê´€ê´€ê³„ ë¶„ì„

### **ğŸ§‘â€ğŸ« í•µì‹¬ í•™ìŠµ ë‚´ìš©**

- Online Retail ë°ì´í„° ì „ì²˜ë¦¬ ë° ê³ ê° ë‹¨ìœ„ ì§‘ê³„
- RFM ê¸°ë°˜ ê³ ê° íŠ¹ì„± ë³€ìˆ˜ ìƒì„±
- í”¼ì–´ìŠ¨ vs ìŠ¤í”¼ì–´ë§Œ vs ì¼„ë‹¬ ìƒê´€ê³„ìˆ˜ ë¹„êµ

### **ğŸ” ì£¼ìš” ë°œê²¬ì‚¬í•­**

- **êµ¬ë§¤íšŸìˆ˜ â†” ì´êµ¬ë§¤ì•¡**: 0.8+ (ê°•í•œ ì–‘ì˜ ìƒê´€)
- **ìƒí’ˆì¢…ë¥˜ìˆ˜ â†” ì´êµ¬ë§¤ì•¡**: 0.6+ (ì¤‘ê°• ì–‘ì˜ ìƒê´€)
- **í‰ê· ë‹¨ê°€ â†” êµ¬ë§¤íšŸìˆ˜**: -0.3 (ì•½í•œ ìŒì˜ ìƒê´€)

### **ğŸ’¼ ì‹¤ë¬´ ì ìš©**

- ë§¤ì¶œ ì „ëµ: êµ¬ë§¤ë¹ˆë„ ì¦ê°€ â†’ ë§¤ì¶œ ì§ê²°
- ìƒí’ˆ ì „ëµ: ë‹¤ì–‘ì„± í™•ëŒ€ â†’ í¬ë¡œìŠ¤ì…€ë§ íš¨ê³¼
- ê°€ê²© ì „ëµ: ê°€ê²© ì¸ìƒ ì‹œ êµ¬ë§¤ë¹ˆë„ ê°ì†Œ ê³ ë ¤

### ğŸ’» í•µì‹¬ ì½”ë“œ

```python
# ê¸°ë³¸ ìƒê´€ê´€ê³„ ë¶„ì„
pearson_corr = df.corr(method='pearson')    # ì„ í˜• ê´€ê³„
spearman_corr = df.corr(method='spearman')  # ìˆœìœ„ ê¸°ë°˜
kendall_corr = df.corr(method='kendall')    # ì´ìƒê°’ ê°•ê±´

# ì‹œê°í™”
sns.heatmap(pearson_corr, annot=True, cmap='RdBu_r', center=0)
```

---

## ğŸŒ€ ë¹„ì„ í˜• ìƒê´€ê´€ê³„ì™€ ê³ ê¸‰ ì¸¡ì •

### **ğŸ§‘â€ğŸ« í•µì‹¬ í•™ìŠµ ë‚´ìš©**

- ì¼„ë‹¬ íƒ€ìš°: ì´ìƒê°’ì— ê°•ê±´í•œ ìˆœìœ„ ìƒê´€
- ìƒí˜¸ì •ë³´ëŸ‰(Mutual Information): ì •ë³´ì´ë¡  ê¸°ë°˜ ë¹„ì„ í˜• ê´€ê³„ íƒì§€
- ì¡°ê±´ë¶€ ìƒê´€ê´€ê³„: ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ ì°¨ì´
- ë‹¤ì–‘í•œ íŒ¨í„´: Uìí˜•, í¬í™”ì , ì§€ìˆ˜ì  ê´€ê³„

### **ğŸ”¬ ê³ ê¸‰ ê¸°ë²• ì •ë¦¬**

- Distance Correlation â†’ ë¹„ì„ í˜• ì¼ë°˜ ê´€ê³„
- MIC (MINE) â†’ íŒ¨í„´ ê³µí‰ íƒìƒ‰
- Kendall Ï„ â†’ ì´ìƒê°’ ê°•ê±´
- Mutual Information â†’ íŠ¹ì„± ì„ íƒ, ë¹„ì„ í˜• íƒì§€

 

### ğŸ’» í•µì‹¬ ì½”ë“œ

```python
# ì¼„ë‹¬ íƒ€ìš°
from scipy.stats import kendalltau
tau, p_value = kendalltau(x, y)

# ìƒí˜¸ì •ë³´ëŸ‰
from sklearn.feature_selection import mutual_info_regression
mi_scores = mutual_info_regression(X, y)

# ì¡°ê±´ë¶€ ìƒê´€ê´€ê³„ (VIP ì„¸ê·¸ë¨¼íŠ¸)
vip_corr = df[df['segment']=='VIP']['x'].corr(df[df['segment']=='VIP']['y'])
```

---

## ğŸ§® ë²”ì£¼í˜• ë³€ìˆ˜ì™€ í˜¼í•©í˜• ì—°ê´€ì„±

### **ğŸ§‘â€ğŸ« í•µì‹¬ í•™ìŠµ ë‚´ìš©**

- êµ­ê°€/ì‹œê°„ëŒ€/ìš”ì¼ë³„ êµ¬ë§¤íŒ¨í„´ ë¶„ì„
- ì¹´ì´ì œê³± ê²€ì • + CramÃ©r's V (ë²”ì£¼í˜•-ë²”ì£¼í˜•)
- ìƒê´€ë¹„(Î·Â²): ë²”ì£¼í˜•â†’ìˆ˜ì¹˜í˜• ì˜í–¥
- ANOVA ê·¸ë£¹ ê°„ ì°¨ì´
- Ï†k (Phi_k): ëª¨ë“  íƒ€ì…ì— ì¼ê´€ëœ ì¸¡ì •

### **ğŸ” ì£¼ìš” ë°œê²¬ì‚¬í•­**

- êµ­ê°€ë³„: ì˜êµ­ vs ê¸°íƒ€ êµ­ê°€ ì°¨ì´
- ì‹œê°„ëŒ€: 10~15ì‹œ ì§‘ì¤‘
- ìš”ì¼: ì£¼ì¤‘ vs ì£¼ë§ ì°¨ì´

### ğŸ’» í•µì‹¬ ì½”ë“œ

```python
# CramÃ©r's V
def cramers_v(x, y):
    confusion_matrix = pd.crosstab(x, y)
    chi2 = chi2_contingency(confusion_matrix)[0]
    n = confusion_matrix.sum().sum()
    return np.sqrt(chi2 / (n * (min(confusion_matrix.shape) - 1)))

# ìƒê´€ë¹„ (Î·Â²)
def correlation_ratio(categories, values):
    return eta_squared

# ì¹´ì´ì œê³± ê²€ì •
chi2, p_value, dof, expected = chi2_contingency(crosstab)
```

---

## ğŸ”— í¸ìƒê´€, ì¡°ê±´ë¶€ ë…ë¦½ì„±, ì¸ê³¼ê´€ê³„

### **ğŸ§‘â€ğŸ« í•µì‹¬ í•™ìŠµ ë‚´ìš©**

- í¸ìƒê´€: í˜¼ë€ë³€ìˆ˜ í†µì œ íš¨ê³¼
- Fisher's Z ê²€ì •: ìœ ì˜ì„± í™•ì¸
- ì¡°ê±´ë¶€ ë…ë¦½ì„±: p > 0.05 â†’ ë…ë¦½
- ì¸ê³¼ ì¶”ë¡  4ì¡°ê±´
    - ì‹œê°„ì  ì„ í›„ê´€ê³„
    - í†µê³„ì  ì—°ê´€ì„±
    - í˜¼ë€ë³€ìˆ˜ í†µì œ
    - ë„ë©”ì¸ ì§€ì‹

### ğŸ’» í•µì‹¬ ì½”ë“œ

```python
# í¸ìƒê´€ êµ¬í˜„
def partial_correlation(data, x, y, control_vars):
    reg_x = LinearRegression().fit(data[control_vars], data[x])
    residual_x = data[x] - reg_x.predict(data[control_vars])
    reg_y = LinearRegression().fit(data[control_vars], data[y])
    residual_y = data[y] - reg_y.predict(data[control_vars])
    return np.corrcoef(residual_x, residual_y)[0, 1]
```

---

## âœ… ì‹¤ë¬´ í™œìš© ì²´í¬ë¦¬ìŠ¤íŠ¸

- ë¶„ì„ ëª©ì  ëª…í™•í™”
- ë°ì´í„° íƒ€ì…ë³„ ì¸¡ì •ë°©ë²• ì„ íƒ
- í˜¼ë€ë³€ìˆ˜ ì‹ë³„
- ë„ë©”ì¸ ì§€ì‹ ê¸°ë°˜ ê°€ì„¤ ì„¤ì •
- ë‹¨ê³„ë³„ ì ‘ê·¼ (ê¸°ë³¸ â†’ ë¹„ì„ í˜• â†’ ë²”ì£¼í˜• â†’ í¸ìƒê´€ â†’ ì¡°ê±´ë¶€ ë…ë¦½ì„±)
- ìœ ì˜ì„±ê³¼ ì‹¤ë¬´ì  ì˜ë¯¸ ë™ì‹œ ê³ ë ¤
- ROI ê¸°ì¤€ ì•¡ì…˜ ì•„ì´í…œ ë„ì¶œ

---

## âœ”ï¸ ì‹¤ë¬´ ì ìš© ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### **ğŸ’°ğŸ“ˆğŸ›’ ë§¤ì¶œ ì „ëµ**

- êµ¬ë§¤ë¹ˆë„ â†‘ (0.8+) â†’ ë¦¬íƒ€ê²ŸíŒ…, êµ¬ë§¤ ì•Œë¦¼
- ìƒí’ˆ ë‹¤ì–‘ì„± â†‘ (0.6+) â†’ í¬ë¡œìŠ¤ì…€ë§, ë²ˆë“¤
- ì¥ë°”êµ¬ë‹ˆ í¬ê¸° â†‘ (0.4+) â†’ ë¬´ë£Œë°°ì†¡, ë¬¶ìŒí• ì¸
- ê°€ê²© ì •ì±…: ê°€ê²© íƒ„ë ¥ì„± ë°˜ì˜

### **ğŸ¯ğŸ‘¥ğŸ’¡ ì„¸ê·¸ë©˜í…Œì´ì…˜ ì „ëµ**

- VIP: ê³ ë‹¨ê°€+ë¹ˆë„ ìœ ì§€
- ê°€ê²©ë¯¼ê°: í• ì¸ ì¤‘ì‹¬
- ë‹¤ì–‘ì„± ì¶”êµ¬: ì‹ ìƒí’ˆ ë…¸ì¶œ
- ì¶©ì„± ê³ ê°: ì •ê¸°êµ¬ë§¤

### **ğŸŒâœˆï¸ğŸ“ˆ ê¸€ë¡œë²Œ ì „ëµ**

- êµ­ê°€ë³„ ì°¨ë³„í™” (CramÃ©râ€™s V > 0.3)
- ì‹œê°„ëŒ€ ìµœì í™”: í”¼í¬íƒ€ì„ ì§‘ì¤‘
- ë¬¸í™” ì°¨ì´ ë°˜ì˜

---

## ğŸ“‹ í•µì‹¬ ì½”ë“œ ìŠ¤ë‹ˆí«

### ğŸ’» ì¢…í•© ìƒê´€ê´€ê³„ ë¶„ì„ í•¨ìˆ˜

```python
def comprehensive_correlation_analysis(df):
    results = {}
    results['pearson'] = df.corr(method='pearson')
    results['spearman'] = df.corr(method='spearman')
    results['kendall'] = df.corr(method='kendall')
    key_vars = ['ì´êµ¬ë§¤ì•¡', 'êµ¬ë§¤íšŸìˆ˜', 'í‰ê· ë‹¨ê°€']
    results['partial'] = {}
    for i, var1 in enumerate(key_vars):
        for var2 in key_vars[i+1:]:
            control_var = 'ìƒí’ˆì¢…ë¥˜ìˆ˜'
            partial_r = partial_correlation(df, var1, var2, [control_var])
            results['partial'][f'{var1}_{var2}'] = partial_r
    return results

```

### ğŸ’» ë²”ì£¼í˜• ì—°ê´€ì„± ë§¤íŠ¸ë¦­ìŠ¤

```python
def categorical_association_matrix(df, cat_vars):
    n_vars = len(cat_vars)
    cramers_matrix = np.zeros((n_vars, n_vars))
    for i, var1 in enumerate(cat_vars):
        for j, var2 in enumerate(cat_vars):
            if i <= j:
                if i == j:
                    cramers_matrix[i, j] = 1.0
                else:
                    cramers_v = calculate_cramers_v(df[var1], df[var2])
                    cramers_matrix[i, j] = cramers_v
                    cramers_matrix[j, i] = cramers_v
    return pd.DataFrame(cramers_matrix, index=cat_vars, columns=cat_vars)

```

---

## âœ¨ í•µì‹¬ ì¸ì‚¬ì´íŠ¸

- ë§¤ì¶œ ê³µì‹: ì´ë§¤ì¶œ = êµ¬ë§¤íšŸìˆ˜ Ã— í‰ê· êµ¬ë§¤ì•¡
- ì „ëµ ìš°ì„ ìˆœìœ„: ë¹ˆë„ â†‘ > ë‹¨ê°€ â†‘
- ì„¸ê·¸ë¨¼íŠ¸ë³„ íŒ¨í„´ ì°¨ì´ (VIP vs ì¼ë°˜)
- êµ­ê°€ë³„ ì°¨ì´ Î·Â² > 0.4 (ê°•í•œ ì—°ê´€)

### âš ï¸ **ì£¼ì˜ì‚¬í•­**

- ìƒê´€ê´€ê³„ â‰  ì¸ê³¼ê´€ê³„ (ì‹¬ìŠ¨ì˜ ì—­ì„¤)
- ì´ìƒê°’ ì™œê³¡ ì£¼ì˜
- ë‹¤ì¤‘ë¹„êµ ì‹œ ì˜¤ë¥˜ ì¦ê°€ (FDR êµì • í•„ìš”)
- ë¹„ì„ í˜• ê´€ê³„ë¥¼ ì„ í˜•ìœ¼ë¡œë§Œ í•´ì„í•˜ëŠ” ì‹¤ìˆ˜