# ğŸ“Š ë°ì´í„° ë¶„ì„

## âœï¸ DAY 05

## ğŸ”§ ì´ìƒì¹˜(Outlier) ì²˜ë¦¬

### ğŸˆ ì´ìƒì¹˜

- ë°ì´í„° ë¶„í¬ì—ì„œ **ê·¹ë‹¨ì ìœ¼ë¡œ ë²—ì–´ë‚œ ê°’**
- ë¶„ì„ ê²°ê³¼ ì™œê³¡ â†’ **ëª¨ë¸ ì„±ëŠ¥ ì €í•˜** ê°€ëŠ¥ì„±
- ë”°ë¼ì„œ **ì‚¬ì „ íƒì§€ ë° ì ì ˆí•œ ì²˜ë¦¬** í•„ìš”

---

### ğŸ” ì´ìƒì¹˜ íƒì§€ ë°©ë²•

### ğŸ§® Z-Score (í‘œì¤€ì ìˆ˜)

- í‰ê· ê³¼ í‘œì¤€í¸ì°¨ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ë–¨ì–´ì¡ŒëŠ”ì§€ ê³„ì‚°
- ì¼ë°˜ ê¸°ì¤€: `|Z| > 3` ì´ìƒì´ë©´ ì´ìƒì¹˜

**ğŸ“ `scipy` í™œìš© ì˜ˆì‹œ**

```python
from scipy import stats
z_scores = stats.zscore(df['ê°€ê²©'])
df[np.abs(z_scores) > 3]
```

### ğŸ“¦ IQR (Interquartile Range, ì‚¬ë¶„ìœ„ìˆ˜)

- Q1 (25%) ~ Q3 (75%) ì‚¬ì´ì˜ ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ê°’
- ê¸°ì¤€: `Q1 - 1.5*IQR`, `Q3 + 1.5*IQR`

**ğŸ“ í•¨ìˆ˜ë¡œ ì •ì˜**

```python
def detect_outlier_iqr(series):
    Q1 = series.quantile(0.25)
    Q3 = series.quantile(0.75)
    IQR = Q3 - Q1
    return (series < Q1 - 1.5*IQR) | (series > Q3 + 1.5*IQR)

df[detect_outlier_iqr(df['ê°€ê²©'])]
```

### ğŸ’¯ Percentile (ë°±ë¶„ìœ„ìˆ˜ ê¸°ë°˜)

- ìƒìœ„/í•˜ìœ„ ëª‡ % ê¸°ì¤€ ì´ìƒì¹˜ íŒë‹¨
- ìœ ì—°í•˜ê²Œ ì»¤ìŠ¤í…€ ê°€ëŠ¥ (ì˜ˆ: ìƒìœ„ 97%, í•˜ìœ„ 1%)

**ğŸ“ ì˜ˆì‹œ ì½”ë“œ**

```python
def detect_outlier_perc(series, lower=1, upper=97):
    return (series < series.quantile(lower / 100)) | (series > series.quantile(upper / 100))

df[detect_outlier_perc(df['ê°€ê²©'], 1, 97)]
```

---

### ğŸ§° ì´ìƒì¹˜ ì²˜ë¦¬ ë°©ë²•

### ğŸ—‘ï¸ ì œê±° (Remove)

**ğŸ“ IQR ê¸°ì¤€ ì´ìƒì¹˜ ì œê±°**

```python
def remove_outliers_iqr(df, col):
    Q1 = df[col].quantile(0.25)
    Q3 = df[col].quantile(0.75)
    IQR = Q3 - Q1
    return df[(df[col] >= Q1 - 1.5*IQR) & (df[col] <= Q3 + 1.5*IQR)]
```

### â™»ï¸ ë³€í™˜ (Winsorization)

- ê·¹ë‹¨ê°’ì„ íŠ¹ì • ë°±ë¶„ìœ„ ê°’ìœ¼ë¡œ ëŒ€ì²´ (clip)

**ğŸ“ ìœˆì €í™” í•¨ìˆ˜**

```python
def winsorize_outliers(df, col, lower=5, upper=95):
    low = df[col].quantile(lower / 100)
    high = df[col].quantile(upper / 100)
    df[col] = df[col].clip(low, high)
    return df
```

### ğŸ©¹ ëŒ€ì²´ (Imputation)

- ì´ìƒì¹˜ë¥¼ **ì¤‘ì•™ê°’ ë“±ìœ¼ë¡œ ì¹˜í™˜**í•˜ì—¬ ì•ˆì •ì„± í™•ë³´

**ğŸ“ ì¤‘ì•™ê°’ìœ¼ë¡œ ëŒ€ì²´**

```python
def replace_outliers_with_median(df, col):
    Q1 = df[col].quantile(0.25)
    Q3 = df[col].quantile(0.75)
    IQR = Q3 - Q1
    lower = Q1 - 1.5 * IQR
    upper = Q3 + 1.5 * IQR
    med_val = df[col].median()
    outliers = (df[col] < lower) | (df[col] > upper)
    df.loc[outliers, col] = int(med_val)
    return df
```

---

### ğŸ“ˆ ì‹œê°í™”ë¥¼ í†µí•œ ë¹„êµ

- **íˆìŠ¤í† ê·¸ë¨ / ë°•ìŠ¤í”Œë¡¯ / ì‚°ì ë„**ë¡œ ì´ìƒì¹˜ íƒìƒ‰ ë° ì²˜ë¦¬ ì „í›„ ë¹„êµ ê°€ëŠ¥

| ë¹„êµ ëŒ€ìƒ | ì‹œê°í™” ì˜ˆì‹œ |
| --- | --- |
| ì›ë³¸ ë°ì´í„° | ê°€ê²© ë¶„í¬, ë°•ìŠ¤í”Œë¡¯, ìˆ˜ëŸ‰ vs ê°€ê²© ì‚°ì ë„ |
| ì œê±° í›„ | ì´ìƒì¹˜ ì œê±°ëœ ê°€ê²© ë¶„í¬ ë° ì‚°ì ë„ |
| ë³€í™˜ (ìœˆì €í™”) í›„ | ìœˆì €í™”ëœ ë°ì´í„° ë¶„í¬ ì‹œê°í™” |
| ëŒ€ì²´ (ì¤‘ì•™ê°’) í›„ | ì¤‘ì•™ê°’ ëŒ€ì²´ëœ ê°€ê²© ë¶„í¬ í™•ì¸ ê°€ëŠ¥ |

> âœ… ì‹œê°í™”ëŠ” ì´ìƒì¹˜ íƒì§€ì™€ ì²˜ë¦¬ ê²°ê³¼ì˜ ì§ê´€ì ì¸ ê²€ì¦ ìˆ˜ë‹¨ì´ ë¨
> 

---

### ğŸ’¡ ì‹¤ë¬´ íŒ

- **íƒì§€ì™€ ì²˜ë¦¬ ì „ëµì€ í•¨ê»˜ ê³ ë ¤**í•´ì•¼ í•¨
- ëª¨ë¸ ë¯¼ê°ë„ì— ë”°ë¼ ì œê±°ë³´ë‹¤ **ë³€í™˜/ëŒ€ì²´**ê°€ ìœ ë¦¬í•œ ê²½ìš°ë„ ë§ìŒ
- **ì‹œê°í™”ëŠ” í•„ìˆ˜**, íŠ¹íˆ ì‚°ì ë„ëŠ” ë‹¤ë¥¸ ë³€ìˆ˜ì™€ì˜ ê´€ê³„ë¥¼ íŒŒì•…í•  ë•Œ ìœ ìš©í•¨